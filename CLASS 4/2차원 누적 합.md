2D Prefix Sum
# 개요
$N$행 $M$열로 이루어진 격자에서 $(i, j)$에서 $(r, c)$까지의 합을 네 꼭짓점 $(i, j), (i, c), (r, j), (r, c)$로 이루어진 직사각형에 해당하는 수들의 합으로 정의합시다.

2차원 누적 합을 이용하면 $\mathcal{O}(NM)$의 전처리 이후 직사각형의 합을 $\mathcal{O}(1)$에 구할 수 있습니다.
# 아이디어
$S[i][j]$를 $(1, 1)$에서 $(i, j)$까지의 합으로 정의합시다.

![[2차원 누적 합.png]]

위 그림에서 $(i, j)$부터 $(r, c)$까지의 합은 분홍색 부분입니다.

$(1, 1)$부터 $(r, c)$까지의 합에서 빨간색, 파란색 부분을 빼고 두 번 빼진 보라색 부분을 한 번 더해주면 분홍색 부분을 얻을 수 있습니다.

이를 식으로 쓰면 $S[r][c] - S[i -1][c] - S[r][j - 1] + S[i - 1][j - 1]$입니다.

$S[i][j]$를 전처리 할 때에도 비슷한 원리를 사용합니다.

![[2차원 누적 합 전처리.png]]

왼쪽 위의 점 부터 $S[i][j]$를 구하면 $(i, j)$보다 왼쪽 위에 있는 점들에 대해서는 모두 $S[i][j]$가 구해져 있으므로 $i$행 $j$열의 원소를 $A[i][j]$라 하면 $S[i][j] = A[i][j] + S[i - 1][j] + S[i][j - 1] - S[i - 1][j - 1]$입니다.
# 문제
- ![[s1.svg|tier]] [구간 합 구하기 5](https://www.acmicpc.net/problem/11660)